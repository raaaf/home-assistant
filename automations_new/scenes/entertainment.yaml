# Scenes - Entertainment.Yaml
# Generated by automation splitter - 3 automations
# Part of Home Assistant configuration

- id: '1662822513154'
  alias: Szene » Gaming
  description: Steuert Gaming-Modus basierend auf Gaming-PC Verfügbarkeit
  triggers:
  - trigger: state
    entity_id: input_boolean.gaming
    to: 'on'
    id: gaming-on
  - trigger: state
    entity_id: input_boolean.gaming
    to: 'off'
    id: gaming-off
  conditions: []
  actions:
  - choose:
    - alias: Gaming-Modus aktivieren
      conditions:
      - condition: trigger
        id: gaming-on
      sequence:
      - alias: Adaptive Lighting deaktivieren
        action: switch.turn_off
        target:
          entity_id: switch.adaptive_lighting_arbeitszimmer
      - alias: Bewegungsmelder Schlafzimmer deaktivieren
        action: automation.turn_off
        target:
          entity_id:
          - automation.1678724233791  # Bedroom motion sensor
          - automation.arbeitszimmer_motion  # Office motion sensor
        data:
          stop_actions: true
      - alias: Schlafzimmer Rollo schließen für Gaming-Atmosphäre
        action: cover.close_cover
        target:
          entity_id: cover.schlafzimmer_rollo
      - alias: Gaming-Lichtszene starten
        action: scene_presets.start_dynamic_scene
        data:
          preset_id: de7eda64-84bf-4ed6-a4fa-76e0ebdd1968
          targets:
            entity_id:
            - light.alle_arbeitszimmer_lichter
            - light.alle_arbeitszimmer_nachtlichter
          transition: 45
          interval: 60
    - alias: Gaming-Modus deaktivieren
      conditions:
      - condition: trigger
        id: gaming-off
      sequence:
      - alias: Adaptive Lighting reaktivieren
        action: switch.turn_on
        target:
          entity_id: switch.adaptive_lighting_arbeitszimmer
      - alias: Check if other scenes need motion sensors disabled
        condition: and
        conditions:
          - condition: state
            entity_id: input_boolean.schlafenszeit
            state: 'off'
          - condition: template
            value_template: "{{ has_value('input_boolean.schlafenszeit') }}"
          - condition: state
            entity_id: input_boolean.party
            state: 'off'
          - condition: template
            value_template: "{{ has_value('input_boolean.party') }}"
      - alias: Bewegungsmelder Schlafzimmer reaktivieren
        action: automation.turn_on
        target:
          entity_id:
          - automation.1678724233791  # Bedroom motion sensor
          - automation.arbeitszimmer_motion  # Office motion sensor
      - alias: Gaming-Lichtszene stoppen
        action: scene_presets.stop_dynamic_scene
        data:
          id: de7eda64-84bf-4ed6-a4fa-76e0ebdd1968
      - alias: Gaming-Lichter ausschalten
        action: light.turn_off
        target:
          entity_id:
          - light.alle_arbeitszimmer_lichter
          - light.alle_arbeitszimmer_nachtlichter
      - alias: Rollo nur bei Tageslicht öffnen
        condition: template
        value_template: "{{ has_value('sun.sun') and state_attr('sun.sun', 'elevation') > 0 and \n   has_value('input_boolean.schlafenszeit') and is_state('input_boolean.schlafenszeit',\
          \ 'off') }}\n"
      - alias: Schlafzimmer Rollo öffnen
        action: cover.open_cover
        target:
          entity_id: cover.schlafzimmer_rollo
  mode: single
- id: '1665084544048'
  alias: Scenen » Movie
  description: Aktiviert Kinomodus mit gedimmter Beleuchtung und deaktivierten Bewegungsmeldern
  triggers:
  - entity_id:
    - input_boolean.movie
    to: 'on'
    id: 'on'
    trigger: state
  - entity_id:
    - input_boolean.movie
    to: 'off'
    id: 'off'
    trigger: state
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id: 'on'
      sequence:
      - action: switch.turn_off
        data: {}
        target:
          entity_id:
          - switch.adaptive_lighting_wohnzimmer
          - switch.adaptive_lighting_kueche
      - data:
          stop_actions: true
        target:
          entity_id:
          - automation.1672931243226  # Motion sensor automation (living room)
          - automation.motion_flur_wohnung  # Hallway motion sensor
        action: automation.turn_off
      - action: light.turn_off
        data:
          transition: 6
        target:
          entity_id:
          - light.alle_wohnzimmer_lichter
          - light.alle_wohnzimmer_nachtlichter
          - light.alle_kuche_lichter
    - conditions:
      - condition: trigger
        id: 'off'
      sequence:
      - action: switch.turn_on
        data: {}
        target:
          entity_id:
          - switch.adaptive_lighting_wohnzimmer
          - switch.adaptive_lighting_kueche
      - data: {}
        target:
          entity_id:
          - automation.1672931243226  # Motion sensor automation (living room)
          - automation.motion_flur_wohnung  # Hallway motion sensor
        action: automation.turn_on
    default: []
  mode: single
- id: '1744286287244'
  alias: Helper » TV Auto off
  description: Turns off living room remote 30 minutes after TV timer is turned on.
  triggers:
  - trigger: state
    entity_id:
    - input_boolean.tv_timer
    from: 'off'
    to: 'on'
  conditions: []
  actions:
  - action: light.turn_on
    data:
      brightness_pct: 3
    target:
      entity_id: light.hyperhdr
  - action: media_player.volume_set
    data:
      volume_level: 0.15
    target:
      entity_id: media_player.denon_avr_x3200w
  - action: timer.start
    target:
      entity_id: timer.tv_auto_off
    data:
      duration: "00:30:00"
  - wait_for_trigger:
    - trigger: event
      event_type: timer.finished
      event_data:
        entity_id: timer.tv_auto_off
  - action: media_player.turn_off
    target:
      entity_id:
      - media_player.denon_avr_x3200w
      - media_player.wohnzimmer
    data: {}
  - target:
      entity_id:
      - input_boolean.tv_timer
      - input_boolean.movie
    action: input_boolean.turn_off
    data: {}
  mode: restart
