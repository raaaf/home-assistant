# Scenes - Activities.Yaml
# Generated by automation splitter - 3 automations
# Part of Home Assistant configuration

- id: '1722519061740'
  alias: Scenen » Gäste
  description: Deaktiviert bestimmte Automationen im Gästemodus für mehr Privatsphäre
  triggers:
  - entity_id: input_boolean.guest_or_away
    to: 'on'
    for:
      minutes: 1
    id: gäste-an
    trigger: state
  - entity_id: input_boolean.guest_or_away
    to: 'off'
    for:
      minutes: 1
    id: gäste-aus
    trigger: state
  - event_type: timer.finished
    event_data:
      entity_id: timer.lock_door_after_guest
    id: timer-abgelaufen
    trigger: event
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id: gäste-an
      sequence:
      - action: automation.turn_off
        target:
          entity_id:
          - automation.helper_workday_musik  # Helper » Workday Musik - Automatic workday music
        data: {}
      - target:
          entity_id:
          - switch.wohnzimmer_steckdose
          - switch.kuchengerate
        action: switch.turn_on
    - conditions:
      - condition: trigger
        id: gäste-aus
      sequence:
      - target:
          entity_id:
          - automation.helper_workday_musik  # Helper » Workday Musik - Automatic workday music
        action: automation.turn_on
      - target:
          entity_id:
          - switch.wohnzimmer_steckdose
          - switch.kuchengerate
        action: switch.turn_off
    - conditions:
      - condition: trigger
        id: timer-abgelaufen
      - condition: state
        entity_id: lock.smart_lock_pro
        state: unlocked
      - condition: template
        value_template: "{{ has_value('lock.smart_lock_pro') }}"
      - condition: state
        entity_id: input_boolean.alle_sind_weg
        state: 'on'
      - condition: template
        value_template: "{{ has_value('input_boolean.alle_sind_weg') }}"
      sequence:
      - target:
          entity_id: lock.smart_lock_pro
        action: lock.lock
      - action: logbook.log
        data:
          name: Tür automatisch verschlossen
          message: Nach Ablauf des Timers automatisch verschlossen
          domain: automation
  mode: single
- id: '1737546608146'
  alias: Scenen » Party
  description: Aktiviert Party-Modus in allen Räumen mit dynamischer Beleuchtung und
    deaktivierten Bewegungsmeldern
  triggers:
  - entity_id:
    - input_boolean.party
    to: 'on'
    id: 'on'
    trigger: state
  - entity_id:
    - input_boolean.party
    to: 'off'
    id: 'off'
    trigger: state
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id: 'on'
      sequence:
      - action: switch.turn_off
        target:
          entity_id:
          - switch.adaptive_lighting_wohnzimmer
          - switch.adaptive_lighting_kueche
          - switch.adaptive_lighting_badezimmer
          - switch.adaptive_lighting_kinderzimmer
          - switch.adaptive_lighting_arbeitszimmer
          - switch.adaptive_lighting_flur
          - switch.adaptive_lighting_schlafzimmer
          - switch.adaptive_lighting_waschzimmer
          - switch.adaptive_lighting_balkon
      - action: light.turn_off
        data:
          transition: 5
        target:
          entity_id:
          - light.alle_wohnzimmer_lichter
          - light.alle_kuche_lichter
          - light.alle_flur_lichter
          - light.alle_schlafzimmer_lichter
          - light.alle_ankleide_lichter
      - action: automation.turn_off
        target:
          entity_id:
          - automation.motion_kuche_2  # Kitchen motion
          - automation.motion_flur_wohnung  # Hallway motion
          - automation.arbeitszimmer_motion  # Office motion
          - automation.motion_schlafzimmer  # Bedroom motion
          - automation.motion_badezimmer_gross  # Bathroom motion
          - automation.motion_esstisch  # Dining table motion
          - automation.kinderzimmer_motion  # Kids room motion
          - automation.motion_haustur  # Front door motion
        data: {}
      - action: scene_presets.start_dynamic_scene
        data:
          preset_id: 9565033d-f2ea-4821-bfba-7dd9b35be20a
          targets:
            entity_id:
            - light.alle_wohnzimmer_lichter
            - light.alle_kuche_lichter
          transition: 45
          interval: 60
    - conditions:
      - condition: trigger
        id: 'off'
      sequence:
      - alias: "Re-enable living room adaptive lighting if party_wohnzimmer is off"
        choose:
        - conditions:
          - condition: state
            entity_id: input_boolean.party_wohnzimmer
            state: 'off'
          - condition: state
            entity_id: input_boolean.movie
            state: 'off'
          sequence:
          - action: switch.turn_on
            target:
              entity_id: switch.adaptive_lighting_wohnzimmer
      - alias: "Re-enable kitchen adaptive lighting if cooking/movie/party_wohnzimmer off"
        choose:
        - conditions:
          - condition: state
            entity_id: input_boolean.kochen
            state: 'off'
          - condition: state
            entity_id: input_boolean.movie
            state: 'off'
          - condition: state
            entity_id: input_boolean.party_wohnzimmer
            state: 'off'
          sequence:
          - action: switch.turn_on
            target:
              entity_id: switch.adaptive_lighting_kueche
      - alias: "Re-enable bathroom adaptive lighting if sauna/baden off"
        choose:
        - conditions:
          - condition: state
            entity_id: input_boolean.sauna
            state: 'off'
          - condition: state
            entity_id: input_boolean.baden
            state: 'off'
          sequence:
          - action: switch.turn_on
            target:
              entity_id: switch.adaptive_lighting_badezimmer
      - alias: "Re-enable other room adaptive lighting unconditionally"
        action: switch.turn_on
        target:
          entity_id:
          - switch.adaptive_lighting_kinderzimmer
          - switch.adaptive_lighting_arbeitszimmer
          - switch.adaptive_lighting_flur
          - switch.adaptive_lighting_schlafzimmer
          - switch.adaptive_lighting_waschzimmer
          - switch.adaptive_lighting_balkon
      - alias: "Re-enable kitchen motion if no conflicting scenes"
        choose:
        - conditions:
          - condition: state
            entity_id: input_boolean.movie
            state: 'off'
          - condition: state
            entity_id: input_boolean.kochen
            state: 'off'
          - condition: state
            entity_id: input_boolean.essen
            state: 'off'
          - condition: state
            entity_id: input_boolean.party_wohnzimmer
            state: 'off'
          sequence:
          - action: automation.turn_on
            target:
              entity_id: automation.motion_kuche_2  # Kitchen motion
      - alias: "Re-enable hallway motion if no conflicting scenes"
        choose:
        - conditions:
          - condition: state
            entity_id: input_boolean.movie
            state: 'off'
          - condition: state
            entity_id: input_boolean.party_wohnzimmer
            state: 'off'
          sequence:
          - action: automation.turn_on
            target:
              entity_id: automation.motion_flur_wohnung  # Hallway motion
      - alias: "Re-enable office motion if work/gaming mode is off"
        choose:
        - conditions:
          - condition: state
            entity_id: input_boolean.arbeit
            state: 'off'
          - condition: state
            entity_id: input_boolean.gaming
            state: 'off'
          sequence:
          - action: automation.turn_on
            target:
              entity_id: automation.arbeitszimmer_motion  # Office motion
      - alias: "Re-enable dining table motion if eating mode is off"
        choose:
        - conditions:
          - condition: state
            entity_id: input_boolean.essen
            state: 'off'
          sequence:
          - action: automation.turn_on
            target:
              entity_id: automation.motion_esstisch  # Dining table motion
      - alias: "Re-enable bathroom motion if sauna/baden mode is off"
        choose:
        - conditions:
          - condition: state
            entity_id: input_boolean.sauna
            state: 'off'
          - condition: state
            entity_id: input_boolean.baden
            state: 'off'
          sequence:
          - action: automation.turn_on
            target:
              entity_id: automation.motion_badezimmer_gross  # Bathroom motion
      - alias: "Re-enable bedroom motion if gaming/schlafenszeit is off"
        choose:
        - conditions:
          - condition: state
            entity_id: input_boolean.gaming
            state: 'off'
          - condition: state
            entity_id: input_boolean.schlafenszeit
            state: 'off'
          sequence:
          - action: automation.turn_on
            target:
              entity_id: automation.motion_schlafzimmer  # Bedroom motion
      - alias: "Re-enable kinderzimmer motion if schlafenszeit is off"
        choose:
        - conditions:
          - condition: state
            entity_id: input_boolean.schlafenszeit
            state: 'off'
          sequence:
          - action: automation.turn_on
            target:
              entity_id: automation.kinderzimmer_motion  # Kids room motion
      - alias: "Re-enable front door motion"
        action: automation.turn_on
        target:
          entity_id: automation.motion_haustur  # Front door motion
      - action: light.turn_off
        data:
          transition: 5
        target:
          entity_id:
          - light.alle_wohnzimmer_lichter
          - light.alle_kuche_lichter
    default: []
  mode: restart
# "Szene » Arbeit" removed - now handled by arbeitszimmer.yaml with blueprint bypass
