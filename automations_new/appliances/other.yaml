# Appliances - Other.Yaml
# Generated by automation splitter - 1 automations
# Part of Home Assistant configuration

- id: '1692865865168'
  alias: Notifications » Futterspender
  description: Überwacht Futterspender und benachrichtigt bei Reinigungs- und Filterwechselbedarf
  triggers:
  - entity_id:
    - sensor.mmgg_fi1_2081_cleantime
    to: '1'
    id: clean
    attribute: clearnserve.cleantime
    trigger: state
  - entity_id:
    - sensor.mmgg_fi1_2081_desiccant_left_time
    to: '1'
    id: filter
    attribute: clearnserve.cleantime
    trigger: state
  conditions:
  - condition: template
    value_template: " {% set last = state_attr('automation.notifications_futterspender',\
      \ 'last_triggered') %}\n    {{ last is none or (now() - last).total_seconds()\
      \ > 12 * 60 * 60 }}"
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - filter
      sequence:
      - data:
          variables:
            todo: Futterspender » Filter ersetzen
        target:
          entity_id: script.xtodo_create_todo
        action: script.turn_on
    - conditions:
      - condition: trigger
        id:
        - clean
      sequence:
      - data:
          variables:
            todo: Futterspender » Reinigen
        target:
          entity_id: script.xtodo_create_todo
        action: script.turn_on
  mode: single
