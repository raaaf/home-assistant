# Helpers - System.Yaml
# Generated by automation splitter - 4 automations
# Part of Home Assistant configuration

- id: '1662367427590'
  alias: Helper » After HA Restart
  description: Lädt Personeninformationen beim Neustart und aktualisiert MediaPlayer
    stündlich
  triggers:
  - event: start
    trigger: homeassistant
  - hours: '*'
    minutes: 0
    trigger: time_pattern
  conditions: []
  actions:
  - action: person.reload
  - target:
      entity_id:
      - media_player.appletv
      - media_player.wohnzimmer
      - media_player.denon_avr_x3200w
      - media_player.homepod_badezimmer
      - media_player.homepod_kinderzimmer
      - media_player.homepod_kuche
      - media_player.homepod_schlafzimmer
      - media_player.homepod_wohnzimmer
      - media_player.homepod_arbeitszimmer
      - media_player.smarttv_4k
    action: homeassistant.update_entity
  mode: single
- id: '1719869864261'
  alias: Helper Restart Home Assistant
  description: Neustart von Home Assistant jeden Sonntag um 00:05 Uhr
  triggers:
  - at: 00:05:00
    trigger: time
  conditions:
  - condition: time
    weekday:
    - sun
  actions:
  - metadata: {}
    data: {}
    action: homeassistant.restart
  - action: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.dusche_aktiv
  mode: single
- id: '1725023601709'
  alias: Helper » Restart Fritzbox
  description: Startet Fritzbox und Repeater jeden Sonntag um 5 Uhr neu
  triggers:
  - at: 05:00:00
    trigger: time
  conditions:
  - condition: state
    entity_id: input_boolean.arbeit
    state: 'off'
  - condition: time
    weekday:
    - sun
  actions:
  - action: button.press
    metadata: {}
    data: {}
    target:
      entity_id:
      - button.fritz_box_7590_ax_restart
      - button.fritz_repeater_1200_ax_restart
      - button.fritz_repeater_2400_restart
  mode: single
- id: '1744630508158'
  alias: Helper » Media Player nur wenn inaktiv aktualisieren
  description: 'Führt alle 30 Minuten zwischen 06:00 und 22:00 Uhr ein Update für
    alle media_player-Entitäten durch, aber nur wenn sie nicht aktiv sind.

    '
  triggers:
  - minutes: /30
    trigger: time_pattern
  conditions:
  - condition: time
    after: 06:00:00
    before: '22:00:00'
  actions:
  - choose:
    - conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: media_player.apple_tv
          state: playing
      sequence:
      - target:
          entity_id: media_player.apple_tv
        action: homeassistant.update_entity
    - conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: media_player.denon_avr_x3200w
          state: playing
      sequence:
      - target:
          entity_id: media_player.denon_avr_x3200w
        action: homeassistant.update_entity
    - conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: media_player.homepod_badezimmer
          state: playing
      sequence:
      - target:
          entity_id: media_player.homepod_badezimmer
        action: homeassistant.update_entity
    - conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: media_player.homepod_kinderzimmer
          state: playing
      sequence:
      - target:
          entity_id: media_player.homepod_kinderzimmer
        action: homeassistant.update_entity
    - conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: media_player.homepod_kuche
          state: playing
      sequence:
      - target:
          entity_id: media_player.homepod_kuche
        action: homeassistant.update_entity
    - conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: media_player.homepod_schlafzimmer
          state: playing
      sequence:
      - target:
          entity_id: media_player.homepod_schlafzimmer
        action: homeassistant.update_entity
    - conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: media_player.homepod_wohnzimmer
          state: playing
      sequence:
      - target:
          entity_id: media_player.homepod_wohnzimmer
        action: homeassistant.update_entity
    - conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: media_player.homepod_arbeitszimmer
          state: playing
      sequence:
      - target:
          entity_id: media_player.homepod_arbeitszimmer
        action: homeassistant.update_entity
    - conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: media_player.smarttv_4k
          state: playing
      sequence:
      - target:
          entity_id: media_player.smarttv_4k
        action: homeassistant.update_entity
    - conditions:
      - condition: not
        conditions:
        - condition: state
          entity_id: media_player.wohnzimmer
          state: playing
      sequence:
      - target:
          entity_id: media_player.wohnzimmer
        action: homeassistant.update_entity
  mode: single
