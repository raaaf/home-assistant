# Helpers - Energy.Yaml
# Generated by automation splitter - 2 automations
# Part of Home Assistant configuration

- id: '1729846723165'
  alias: Helper » Cowboys
  description: 'Überwacht Akkustand und Reichweite der Cowboy E-Bikes und sendet Benachrichtigungen

    '
  triggers:
  - entity_id: sensor.rennsemmel_remaining_battery
    below: 25
    id: rennsemmel-battery
    trigger: numeric_state
  - entity_id: sensor.butzabatza_remaining_battery
    below: 25
    id: butzabatza-battery
    trigger: numeric_state
  conditions: []
  actions:
  - action: logbook.log
    data:
      name: Cowboy E-Bike Batterie niedrig
      message: '{{ trigger.id }} - Battery <= 25%'
      domain: automation
  mode: restart

- id: '1745924954227'
  alias: Helper » Speichere Solarproduktion gestern
  description: 'Speichert die Tagesproduktion der Solaranlage kurz vor Mitternacht
    in eine Input Number für die spätere Verwendung

    '
  triggers:
  - at: '23:55:00'
    trigger: time
  conditions:
  - condition: template
    value_template: '{{ has_value("sensor.dtu_ac_daily_energy") and states("sensor.dtu_ac_daily_energy") not in ["unknown", "unavailable"] }}'
  actions:
  - data:
      entity_id: input_number.solarproduktion_gestern
      value: '{{ (states("sensor.dtu_ac_daily_energy") | float(0) / 1000) | round(2) if has_value("sensor.dtu_ac_daily_energy") else 0 }}'
    action: input_number.set_value
