# Areas - Badezimmer.Yaml
# Generated by automation splitter - 9 automations
# Part of Home Assistant configuration

- id: '1646852212486'
  alias: Badezimmer » Luftfeuchtigkeit
  description: 'Steuert den Badezimmerlüfter basierend auf Luftfeuchtigkeit (>60 %
    an, <59 % aus)

    '
  trigger:
  - entity_id: sensor.badezimmer_temperatur_und_luftfeuchtigkeit_humidity
    above: 65
    id: above
    trigger: numeric_state
  - entity_id: sensor.badezimmer_temperatur_und_luftfeuchtigkeit_humidity
    below: 60
    id: below
    trigger: numeric_state
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id: above
      sequence:
      - target:
          entity_id: switch.luefter_badezimmer
        action: switch.turn_on
        data: {}
    - conditions:
      - condition: trigger
        id: below
      sequence:
      - target:
          entity_id: switch.luefter_badezimmer
        action: switch.turn_off
        data: {}
  mode: single
  max_exceeded: silent
- id: '1647715674725'
  alias: Scenen » Sauna
  description: Aktiviert Sauna-Modus mit spezieller Beleuchtung, Lüftung und Rollosteuerung
  trigger:
  - entity_id:
    - input_boolean.sauna
    to: 'on'
    id: 'on'
    trigger: state
  - entity_id:
    - input_boolean.sauna
    to: 'off'
    id: 'off'
    trigger: state
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id: 'on'
      sequence:
      - alias: "Deaktiviere adaptive Beleuchtung"
        action: script.scene_disable_adaptive_lighting
        data:
          room: "badezimmer"
      - alias: "Deaktiviere Motion-Automationen"
        action: script.scene_disable_motion_automations
        data:
          automations: "automation.motion_badezimmer_gross"
      - action: cover.set_cover_position
        target:
          entity_id: cover.badezimmer_rollo
        data:
          position: 0
      - data: {}
        target:
          entity_id: switch.luefter_badezimmer
        action: switch.turn_on
      - action: scene_presets.start_dynamic_scene
        data:
          preset_id: 454176dd-7d24-43de-86c4-ee73f8febbec  # Ruby glow (warm für Sauna)
          targets:
            entity_id:
            - light.alle_badezimmer_lichter
            - light.alle_badezimmer_nachtlichter
          brightness: 70
          transition: 90
          interval: 120
    - conditions:
      - condition: trigger
        id: 'off'
      sequence:
      - action: scene_presets.stop_dynamic_scene
        data:
          id: 454176dd-7d24-43de-86c4-ee73f8febbec  # Ruby glow
      - action: light.turn_off
        data:
          transition: 5
        target:
          entity_id:
          - light.alle_badezimmer_lichter
          - light.alle_badezimmer_nachtlichter
      - action: cover.set_cover_position
        target:
          entity_id: cover.badezimmer_rollo
        data:
          position: 100
      - delay:
          seconds: 6
      - alias: "Reaktiviere adaptive Beleuchtung mit Konflikt-Prüfung"
        action: script.scene_enable_adaptive_lighting
        data:
          room: "badezimmer"
          exclude_scenes: "baden,party"
      - alias: "Reaktiviere Motion-Automationen mit Konflikt-Prüfung"
        action: script.scene_enable_motion_automations
        data:
          automations: "automation.motion_badezimmer_gross"
          exclude_scenes: "baden"
    default: []
  mode: restart
- id: '1662822489094'
  alias: Scenen » Baden
  description: Aktiviert Bade-Modus mit spezieller Beleuchtung und deaktiviert Bewegungsmelder
  trigger:
  - entity_id:
    - input_boolean.baden
    to: 'on'
    id: 'on'
    trigger: state
  - entity_id:
    - input_boolean.baden
    to: 'off'
    id: 'off'
    trigger: state
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id: 'on'
      sequence:
      - alias: "Deaktiviere adaptive Beleuchtung"
        action: script.scene_disable_adaptive_lighting
        data:
          room: "badezimmer"
      - alias: "Deaktiviere Motion-Automationen"
        action: script.scene_disable_motion_automations
        data:
          automations: "automation.motion_badezimmer_gross"
      - action: scene_presets.start_dynamic_scene
        data:
          preset_id: ffbf7ff8-dc4a-4c56-b157-7a59113be7b7  # Tropical twilight (warm für Baden)
          targets:
            entity_id:
            - light.alle_badezimmer_lichter
            - light.alle_badezimmer_nachtlichter
          brightness: 100
          transition: 60
          interval: 90
    - conditions:
      - condition: trigger
        id: 'off'
      sequence:
      - action: scene_presets.stop_dynamic_scene
        data:
          id: ffbf7ff8-dc4a-4c56-b157-7a59113be7b7  # Tropical twilight
      - action: light.turn_off
        data:
          transition: 5
        target:
          entity_id:
          - light.alle_badezimmer_lichter
          - light.alle_badezimmer_nachtlichter
      - delay:
          seconds: 6
      - alias: "Reaktiviere adaptive Beleuchtung mit Konflikt-Prüfung"
        action: script.scene_enable_adaptive_lighting
        data:
          room: "badezimmer"
          exclude_scenes: "sauna,party"
      - alias: "Reaktiviere Motion-Automationen mit Konflikt-Prüfung"
        action: script.scene_enable_motion_automations
        data:
          automations: "automation.motion_badezimmer_gross"
          exclude_scenes: "sauna"
    default: []
  mode: restart
- id: '1672929418223'
  alias: Motion » Badezimmer Gross
  description: Bewegungsgesteuerte Beleuchtung im Badezimmer mit Nachtlicht-Modus
  use_blueprint:
    path: Blackshome/sensor-light.yaml
    input:
      motion_trigger:
      - binary_sensor.badezimmer_motion_all
      include_night_lights: night_lights_enabled
      night_lights:
        entity_id: light.alle_badezimmer_nachtlichter
      night_lights_after_time: '22:00:00'
      night_lights_before_time: 06:00:00
      light_switch:
        entity_id: light.alle_badezimmer_lichter
      include_ambient: ambient_enabled
      ambient_light_sensor: sensor.badezimmer_motion_illuminance
      ambient_light_options: ambient_light_option_enabled
      night_lights_conditions:
      - time_enabled
      night_lights_entity_state:
      - input_boolean.schlafenszeit
      include_night_light_control: []
      night_light_brightness: 30
      night_light_transition_on: 3
      night_light_transition_off: 9
      boolean_scenes_scripts: input_boolean.musik_badezimmer
      time_delay: 1
      night_time_delay: 1
      ambient_light_value: 150
      ambient_light_high_value: 200
      # Bypass motion turn-off when manual control is active
      include_bypass:
      - bypass_enabled_stop
      motion_bypass_lights_stop:
      - binary_sensor.badezimmer_manual_control
