# ============================================================================
# ADAPTIVE LIGHTING CONFIGURATION
# ============================================================================
#
# Home Assistant Adaptive Lighting component configurations for all rooms
# Optimized for Bavarian climate, daily routines, and circadian rhythm health
# UPDATED: Optimized for Zigbee2MQTT with mixed Philips Hue & IKEA lights
#
# Key principles:
# - Sleep color temps at 1800K for optimal circadian rhythm support
# - Room-specific timing based on usage patterns
# - IKEA-compatible transitions (10-15s max) to prevent bulb lockups
# - Separate commands for IKEA lights to avoid simultaneous brightness/color changes
# - Higher brightness for safety areas (bathrooms, hallways)
# - Extended evening hours for work and outdoor spaces

# =============================================================================
# LIVING SPACES - Primary family areas with extended evening usage
# =============================================================================

- name: "Wohnzimmer"
  lights:
    - light.wohnzimmer_wand_alle          # Zigbee-Gruppe (6 Lichter - synchron)
    - light.wohnzimmer_esstisch_alle      # Zigbee-Gruppe (3 Lichter - synchron)
    - light.wohnzimmer_spielematte_alle   # Zigbee-Gruppe (4 Lichter - synchron)
    - light.wohnzimmer_schrank_alle       # Zigbee-Gruppe (3 Lichter - synchron)
    - light.wohnzimmer_spieletisch        # Einzellicht (individuell gesteuert)
  interval: 60
  transition: 10  # Short transitions prevent IKEA lockups
  initial_transition: 1  # Prevents color flashing
  min_brightness: 10
  max_brightness: 100
  min_color_temp: 2200 # IKEA/Hue compatible warm minimum
  max_color_temp: 4000 # IKEA maximum cool white
  prefer_rgb_color: false
  sleep_brightness: 10 # Consistent across all rooms
  sleep_color_temp: 2200  # Warmest supported by all bulbs
  sleep_transition: 10 # Short transitions prevent IKEA lockups
  transition_until_sleep: true
  min_sunrise_time: "05:00:00"
  max_sunrise_time: "07:00:00" # Peak brightness/coolness at wake time
  min_sunset_time: "18:00:00"
  max_sunset_time: "20:00:00"
  take_over_control: true
  detect_non_ha_changes: true  # Critical for Zigbee2MQTT
  autoreset_control_seconds: 3600
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 0  # Immediate adaptation for correct color on turn-on
  skip_redundant_commands: true
  intercept: false
  multi_light_intercept: false
  include_config_in_attributes: true
  brightness_mode: "tanh"

- name: "KÃ¼che"
  lights:
    - light.kuche_decke_alle              # Zigbee-Gruppe (2 Lichter - synchron)
    - light.kuche_insel_alle              # Zigbee-Gruppe (2 Lichter - synchron)
    - light.kuche_schrank_alle            # Zigbee-Gruppe (2 Lichter - synchron)
  interval: 60
  transition: 10  # Short transitions prevent IKEA lockups
  initial_transition: 1  # Prevents color flashing
  min_brightness: 10
  max_brightness: 100
  min_color_temp: 2200 # IKEA/Hue compatible warm minimum
  max_color_temp: 4000 # IKEA maximum cool white
  prefer_rgb_color: false
  sleep_brightness: 10 # Consistent across all rooms
  sleep_color_temp: 2200  # Warmest supported by all bulbs
  sleep_transition: 45  # Optimized for IKEA compatibility
  transition_until_sleep: true
  min_sunrise_time: "05:00:00" # Aligned with wake time
  max_sunrise_time: "07:00:00" # Peak brightness/coolness at wake time
  min_sunset_time: "18:00:00"
  max_sunset_time: "20:00:00"
  take_over_control: true
  detect_non_ha_changes: true  # Critical for Zigbee2MQTT
  autoreset_control_seconds: 3600
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 0  # Immediate adaptation for correct color on turn-on
  skip_redundant_commands: true
  intercept: false
  multi_light_intercept: false
  include_config_in_attributes: true
  brightness_mode: "tanh"

# =============================================================================
# BEDROOMS - Sleep-optimized with gentle transitions and early sunset times
# =============================================================================

- name: "Schlafzimmer"
  lights:
    - light.schlafzimmer_decke_alle       # Zigbee-Gruppe (2 Lichter - synchron)
    - light.schlafzimmer_bett             # Einzellicht (individuell gesteuert)
    - light.schlafzimmer_tv               # Einzellicht (individuell gesteuert)
  interval: 60
  transition: 10  # Short transitions prevent IKEA lockups
  initial_transition: 1  # Prevents color flashing
  min_brightness: 10
  max_brightness: 100
  min_color_temp: 2200 # IKEA/Hue compatible warm minimum
  max_color_temp: 4000 # IKEA maximum cool white
  prefer_rgb_color: false
  sleep_brightness: 10 # Consistent across all rooms
  sleep_color_temp: 2200  # Warmest supported by all bulbs
  sleep_transition: 10 # Short transitions prevent IKEA lockups
  transition_until_sleep: true
  min_sunrise_time: "05:00:00"
  max_sunrise_time: "07:00:00" # Peak brightness/coolness at wake time
  min_sunset_time: "17:30:00" # Earlier evening transition
  max_sunset_time: "19:30:00"
  take_over_control: true
  detect_non_ha_changes: true  # Critical for Zigbee2MQTT
  autoreset_control_seconds: 3600
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 0  # Immediate adaptation for correct color on turn-on
  skip_redundant_commands: true
  intercept: false
  multi_light_intercept: false
  include_config_in_attributes: true
  brightness_mode: "tanh"

- name: "Kinderzimmer"
  lights:
    - light.kinderzimmer_decke            # Einzellicht (Hauptlicht)
    - light.kinderzimmer_bucher           # Einzellicht (Leselicht)
    - light.kinderzimmer_schrank          # Einzellicht (Akzentlicht)
    - light.kinderzimmer_stehlampe        # Einzellicht (Stimmungslicht)
  interval: 60
  transition: 10  # Short transitions prevent IKEA lockups
  initial_transition: 1  # Prevents color flashing
  min_brightness: 10
  max_brightness: 100
  min_color_temp: 2200 # IKEA/Hue compatible warm minimum
  max_color_temp: 4000 # IKEA maximum cool white
  prefer_rgb_color: false
  sleep_brightness: 10 # Consistent across all rooms
  sleep_color_temp: 2200  # Warmest supported by all bulbs
  sleep_transition: 10 # Short transitions prevent IKEA lockups
  transition_until_sleep: true
  min_sunrise_time: "05:00:00"
  max_sunrise_time: "07:00:00" # Peak brightness/coolness at wake time
  min_sunset_time: "17:00:00" # Early bedtime routine
  max_sunset_time: "19:00:00"
  take_over_control: true
  detect_non_ha_changes: true  # Critical for Zigbee2MQTT
  autoreset_control_seconds: 3600
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 0  # Immediate adaptation for correct color on turn-on
  skip_redundant_commands: true
  intercept: false
  multi_light_intercept: false
  include_config_in_attributes: true
  brightness_mode: "tanh"

# =============================================================================
# BATHROOMS & UTILITY - Safety-focused with higher night brightness
# =============================================================================

- name: "Badezimmer"
  lights:
    - light.badezimmer_decke_alle         # Zigbee-Gruppe (2 Lichter - synchron)
    - light.badezimmer_schrank            # Einzellicht (individuell gesteuert)
    - light.badezimmer_fenster            # Einzellicht (individuell gesteuert)
  interval: 60
  transition: 10  # Short transitions prevent IKEA lockups
  initial_transition: 1  # Prevents color flashing
  min_brightness: 10
  max_brightness: 100
  min_color_temp: 2200 # IKEA/Hue compatible warm minimum
  max_color_temp: 4000 # IKEA maximum cool white
  prefer_rgb_color: false
  sleep_brightness: 10 # Consistent across all rooms
  sleep_color_temp: 2200  # Warmest supported by all bulbs
  sleep_transition: 45  # Optimized for IKEA compatibility
  transition_until_sleep: true
  min_sunrise_time: "05:00:00" # Aligned with wake time
  max_sunrise_time: "07:00:00" # Peak brightness/coolness at wake time
  min_sunset_time: "18:00:00"
  max_sunset_time: "20:00:00"
  take_over_control: true
  detect_non_ha_changes: true  # Critical for Zigbee2MQTT
  autoreset_control_seconds: 7200 # 2 hours for less frequently used rooms
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 0  # Immediate adaptation for correct color on turn-on
  skip_redundant_commands: true
  intercept: false
  multi_light_intercept: false
  include_config_in_attributes: true
  brightness_mode: "tanh"

- name: "Waschzimmer"
  lights:
    - light.waschzimmer_decke
  interval: 60
  transition: 10  # Short transitions prevent IKEA lockups
  initial_transition: 1  # Prevents color flashing
  min_brightness: 10
  max_brightness: 100
  min_color_temp: 2200 # IKEA/Hue compatible warm minimum
  max_color_temp: 4000 # IKEA maximum cool white
  prefer_rgb_color: false
  sleep_brightness: 10 # Consistent across all rooms
  sleep_color_temp: 2200  # Warmest supported by all bulbs
  sleep_transition: 10 # Short transitions prevent IKEA lockups
  transition_until_sleep: true
  min_sunrise_time: "05:00:00"
  max_sunrise_time: "07:00:00" # Peak brightness/coolness at wake time
  min_sunset_time: "18:00:00"
  max_sunset_time: "20:00:00"
  take_over_control: true
  detect_non_ha_changes: true  # Critical for Zigbee2MQTT
  autoreset_control_seconds: 7200
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 0  # Immediate adaptation for correct color on turn-on
  skip_redundant_commands: true
  intercept: false
  multi_light_intercept: false
  include_config_in_attributes: true
  brightness_mode: "tanh"

# =============================================================================
# WORK & DRESSING AREAS - Productivity-optimized with extended evening hours
# =============================================================================

- name: "Arbeitszimmer"
  lights:
    - light.arbeitszimmer_decke           # Einzellicht (Hauptlicht)
    - light.arbeitszimmer_pc_alle         # Zigbee-Gruppe (2 Lichter - synchron)
  interval: 60
  transition: 10  # Short transitions prevent IKEA lockups
  initial_transition: 1  # Prevents color flashing
  min_brightness: 10
  max_brightness: 100
  min_color_temp: 2200 # IKEA/Hue compatible warm minimum
  max_color_temp: 4000 # IKEA maximum cool white
  prefer_rgb_color: false
  sleep_brightness: 10 # Consistent across all rooms
  sleep_color_temp: 2200  # Warmest supported by all bulbs
  sleep_transition: 10 # Short transitions prevent IKEA lockups
  transition_until_sleep: true
  min_sunrise_time: "05:00:00" # Aligned with wake time
  max_sunrise_time: "07:00:00" # Peak brightness/coolness at wake time
  min_sunset_time: "19:00:00" # Extended evening hours
  max_sunset_time: "21:30:00"
  take_over_control: true
  detect_non_ha_changes: true  # Critical for Zigbee2MQTT
  autoreset_control_seconds: 3600
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 0  # Immediate adaptation for correct color on turn-on
  skip_redundant_commands: true
  intercept: false
  multi_light_intercept: false
  include_config_in_attributes: true
  brightness_mode: "tanh"

- name: "Ankleide"
  lights:
    - light.ankleide_decke_alle           # Zigbee-Gruppe (2 Lichter - synchron)
  interval: 60
  transition: 10  # Short transitions prevent IKEA lockups
  initial_transition: 1  # Prevents color flashing
  min_brightness: 10
  max_brightness: 100
  min_color_temp: 2200 # IKEA/Hue compatible warm minimum
  max_color_temp: 4000 # IKEA maximum cool white
  prefer_rgb_color: false
  sleep_brightness: 10 # Consistent across all rooms
  sleep_color_temp: 2200  # Warmest supported by all bulbs
  sleep_transition: 45  # Optimized for IKEA compatibility
  transition_until_sleep: true
  min_sunrise_time: "05:00:00" # Aligned with wake time
  max_sunrise_time: "07:00:00" # Peak brightness/coolness at wake time
  min_sunset_time: "18:00:00"
  max_sunset_time: "20:00:00"
  take_over_control: true
  detect_non_ha_changes: true  # Critical for Zigbee2MQTT
  autoreset_control_seconds: 7200
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 0  # Immediate adaptation for correct color on turn-on
  skip_redundant_commands: true
  intercept: false
  multi_light_intercept: false
  include_config_in_attributes: true
  brightness_mode: "tanh"

# =============================================================================
# TRANSITION AREAS - Motion-activated spaces with quick transitions
# =============================================================================

- name: "Flur"
  lights:
    - light.flur_decke_alle               # Zigbee-Gruppe (6 Lichter - synchron)
    - light.flur_schrank_alle             # Zigbee-Gruppe (2 Lichter - synchron)
  interval: 60
  transition: 10  # Short transitions prevent IKEA lockups
  initial_transition: 1  # Prevents color flashing
  min_brightness: 10
  max_brightness: 100
  min_color_temp: 2200 # IKEA/Hue compatible warm minimum
  max_color_temp: 4000 # IKEA maximum cool white
  prefer_rgb_color: false
  sleep_brightness: 10 # Consistent across all rooms
  sleep_color_temp: 2200  # Warmest supported by all bulbs
  sleep_transition: 10 # Short transitions prevent IKEA lockups
  transition_until_sleep: true
  min_sunrise_time: "05:00:00"
  max_sunrise_time: "07:00:00" # Peak brightness/coolness at wake time
  min_sunset_time: "18:00:00"
  max_sunset_time: "20:00:00"
  take_over_control: true
  detect_non_ha_changes: true  # Critical for Zigbee2MQTT
  autoreset_control_seconds: 7200
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 0  # Immediate adaptation for correct color on turn-on
  skip_redundant_commands: true
  intercept: false
  multi_light_intercept: false
  include_config_in_attributes: true
  brightness_mode: "tanh"

# =============================================================================
# OUTDOOR AREAS - Extended evening hours with slower transitions
# =============================================================================

- name: "Balkon"
  lights:
    - light.balkon_wand_alle              # Zigbee-Gruppe (2 Lichter - synchron)
    - light.balkon_blumen                 # Einzellicht (individuell gesteuert)
  interval: 90 # Slower updates for outdoor
  transition: 10  # Short transitions prevent IKEA lockups
  initial_transition: 1  # Prevents color flashing
  min_brightness: 10 # Lower minimum for outdoor ambiance
  max_brightness: 100
  min_color_temp: 2200 # IKEA/Hue compatible warm minimum
  max_color_temp: 4000 # IKEA maximum cool white
  prefer_rgb_color: false
  sleep_brightness: 10 # Consistent across all rooms
  sleep_color_temp: 2200  # Warmest supported by all bulbs
  sleep_transition: 10 # Short transitions prevent IKEA lockups
  transition_until_sleep: false # No sleep transition for outdoor
  min_sunrise_time: "05:00:00" # Aligned with wake time
  max_sunrise_time: "07:00:00" # Peak brightness/coolness at wake time
  min_sunset_time: "19:30:00" # Later for outdoor evening use
  max_sunset_time: "21:30:00" # Extended summer evenings
  take_over_control: true
  detect_non_ha_changes: true  # Critical for Zigbee2MQTT
  autoreset_control_seconds: 7200 # Longer reset for outdoor
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 0  # Immediate adaptation for correct color on turn-on
  skip_redundant_commands: true
  intercept: false
  multi_light_intercept: false
  include_config_in_attributes: true
  brightness_mode: "tanh" # Smooth transitions for outdoor
