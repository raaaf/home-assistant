# ============================================================================
# ADAPTIVE LIGHTING CONFIGURATION
# ============================================================================
#
# Home Assistant Adaptive Lighting component configurations for all rooms
# Optimized for Bavarian climate, daily routines, and circadian rhythm health
# UPDATED: Optimized for Zigbee2MQTT with mixed Philips Hue & IKEA lights
#
# Key principles:
# - Sleep color temps at 1800K for optimal circadian rhythm support
# - Room-specific timing based on usage patterns
# - IKEA-compatible transitions (10-15s max) to prevent bulb lockups
# - Separate commands for IKEA lights to avoid simultaneous brightness/color changes
# - Higher brightness for safety areas (bathrooms, hallways)
# - Extended evening hours for work and outdoor spaces

# =============================================================================
# LIVING SPACES - Primary family areas with extended evening usage
# =============================================================================

- name: "Wohnzimmer"
  lights:
    - light.alle_wohnzimmer_lichter
  interval: 90
  transition: 15  # Reduced for IKEA compatibility
  initial_transition: 0
  min_brightness: 30
  max_brightness: 100
  min_color_temp: 2000 # Consistent warm minimum
  max_color_temp: 6000 # Bright white maximum
  prefer_rgb_color: false
  sleep_brightness: 5 # Very dim for evening relaxation
  sleep_color_temp: 1800  # Scientifically optimal for circadian rhythm
  sleep_transition: 60 # Reduced for IKEA compatibility
  transition_until_sleep: true
  min_sunrise_time: "05:00:00"
  max_sunrise_time: "07:00:00"
  min_sunset_time: "18:00:00"
  max_sunset_time: "20:00:00"
  take_over_control: true
  detect_non_ha_changes: false
  autoreset_control_seconds: 3600
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 8  # Increased for mixed bulb types
  skip_redundant_commands: true
  intercept: true
  multi_light_intercept: true
  include_config_in_attributes: true
  brightness_mode: "tanh"

- name: "KÃ¼che"
  lights:
    - light.alle_kuche_lichter
  interval: 90
  transition: 15  # Reduced for IKEA compatibility
  initial_transition: 0
  min_brightness: 30
  max_brightness: 100
  min_color_temp: 2000 # Consistent warm minimum
  max_color_temp: 6000 # Bright white for food prep
  prefer_rgb_color: false
  sleep_brightness: 25 # Higher for late night snacks/safety
  sleep_color_temp: 1800  # Warmer for sleep hygiene
  sleep_transition: 30  # Reduced for IKEA compatibility
  transition_until_sleep: true
  min_sunrise_time: "06:00:00" # Later start for kitchen activities
  max_sunrise_time: "07:30:00"
  min_sunset_time: "18:00:00"
  max_sunset_time: "20:00:00"
  take_over_control: true
  detect_non_ha_changes: false
  autoreset_control_seconds: 3600
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 8  # Increased for mixed bulb types
  skip_redundant_commands: true
  intercept: true
  multi_light_intercept: true
  include_config_in_attributes: true
  brightness_mode: "tanh"

# =============================================================================
# BEDROOMS - Sleep-optimized with gentle transitions and early sunset times
# =============================================================================

- name: "Schlafzimmer"
  lights:
    - light.alle_schlafzimmer_lichter
  interval: 90
  transition: 12  # Reduced for IKEA compatibility
  initial_transition: 0
  min_brightness: 30
  max_brightness: 100
  min_color_temp: 2000
  max_color_temp: 6000 # Bright white maximum for energizing mornings
  prefer_rgb_color: false
  sleep_brightness: 35 # Higher for nighttime navigation
  sleep_color_temp: 1800 # Optimal warmth for sleep without being too extreme
  sleep_transition: 60 # Reduced for IKEA compatibility
  transition_until_sleep: true
  min_sunrise_time: "05:00:00"
  max_sunrise_time: "07:00:00"
  min_sunset_time: "17:30:00" # Earlier evening transition
  max_sunset_time: "19:30:00"
  take_over_control: true
  detect_non_ha_changes: false
  autoreset_control_seconds: 3600
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 10  # Higher for bedroom motion sensors
  skip_redundant_commands: true
  intercept: true
  multi_light_intercept: true
  include_config_in_attributes: true
  brightness_mode: "tanh"

- name: "Kinderzimmer"
  lights:
    - light.alle_kinderzimmer_lichter
  interval: 90
  transition: 15  # Reduced for IKEA compatibility
  initial_transition: 0
  min_brightness: 30
  max_brightness: 100
  min_color_temp: 2000
  max_color_temp: 6000 # Bright white maximum for consistency
  prefer_rgb_color: false
  sleep_brightness: 8 # Very low for children's sleep
  sleep_color_temp: 1800 # Optimal circadian rhythm for children
  sleep_transition: 45 # Reduced for IKEA compatibility
  transition_until_sleep: true
  min_sunrise_time: "05:00:00"
  max_sunrise_time: "07:00:00"
  min_sunset_time: "17:00:00" # Early bedtime routine
  max_sunset_time: "19:00:00"
  take_over_control: true
  detect_non_ha_changes: false
  autoreset_control_seconds: 3600
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 8  # Increased for mixed bulb types
  skip_redundant_commands: true
  intercept: true
  multi_light_intercept: true
  include_config_in_attributes: true
  brightness_mode: "tanh"

# =============================================================================
# BATHROOMS & UTILITY - Safety-focused with higher night brightness
# =============================================================================

- name: "Badezimmer"
  lights:
    - light.alle_badezimmer_lichter
  interval: 90
  transition: 15  # Reduced for IKEA compatibility
  initial_transition: 0
  min_brightness: 30
  max_brightness: 100
  min_color_temp: 2000 # Consistent warm minimum
  max_color_temp: 6000 # Bright white for morning alertness
  prefer_rgb_color: false
  sleep_brightness: 15 # Low but safe for nighttime use
  sleep_color_temp: 1800 # Optimal for evening bathroom use
  sleep_transition: 60
  transition_until_sleep: true
  min_sunrise_time: "06:00:00" # Align with morning routines
  max_sunrise_time: "08:00:00"
  min_sunset_time: "18:00:00"
  max_sunset_time: "20:00:00"
  take_over_control: true
  detect_non_ha_changes: false
  autoreset_control_seconds: 7200 # 2 hours for less frequently used rooms
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 8  # Increased for mixed bulb types
  skip_redundant_commands: true
  intercept: true
  multi_light_intercept: true
  include_config_in_attributes: true
  brightness_mode: "tanh"

- name: "Waschzimmer"
  lights:
    - light.alle_waschzimmer_lichter
  interval: 90
  transition: 15  # Reduced for IKEA compatibility
  initial_transition: 0
  min_brightness: 30
  max_brightness: 100
  min_color_temp: 2000 # Consistent warm minimum
  max_color_temp: 6000 # Bright white maximum
  prefer_rgb_color: false
  sleep_brightness: 30 # Higher for safety during night use
  sleep_color_temp: 1800 # Better circadian alignment
  sleep_transition: 45 # Quicker transition for utility space
  transition_until_sleep: true
  min_sunrise_time: "05:00:00"
  max_sunrise_time: "07:00:00"
  min_sunset_time: "18:00:00"
  max_sunset_time: "20:00:00"
  take_over_control: true
  detect_non_ha_changes: false
  autoreset_control_seconds: 7200
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 8  # Increased for mixed bulb types
  skip_redundant_commands: true
  intercept: true
  multi_light_intercept: true
  include_config_in_attributes: true
  brightness_mode: "tanh"

# =============================================================================
# WORK & DRESSING AREAS - Productivity-optimized with extended evening hours
# =============================================================================

- name: "Arbeitszimmer"
  lights:
    - light.alle_arbeitszimmer_lichter
  interval: 90
  transition: 15  # Reduced for IKEA compatibility
  initial_transition: 0
  min_brightness: 30
  max_brightness: 100
  min_color_temp: 2000 # Consistent warm minimum
  max_color_temp: 6000 # Bright white for productivity
  prefer_rgb_color: false
  sleep_brightness: 15 # Minimal for late work sessions
  sleep_color_temp: 1800 # Better circadian support
  sleep_transition: 45 # Smoother transition for productivity
  transition_until_sleep: true
  min_sunrise_time: "06:30:00" # Later start for work schedule
  max_sunrise_time: "08:00:00"
  min_sunset_time: "19:00:00" # Extended evening hours
  max_sunset_time: "21:30:00"
  take_over_control: true
  detect_non_ha_changes: false
  autoreset_control_seconds: 3600
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 8  # Increased for mixed bulb types
  skip_redundant_commands: true
  intercept: true
  multi_light_intercept: true
  include_config_in_attributes: true
  brightness_mode: "tanh"

- name: "Ankleide"
  lights:
    - light.alle_ankleide_lichter
  interval: 90
  transition: 15  # Reduced for IKEA compatibility
  initial_transition: 0
  min_brightness: 30
  max_brightness: 100
  min_color_temp: 2000 # Consistent warm minimum
  max_color_temp: 6000 # Bright white maximum
  prefer_rgb_color: false
  sleep_brightness: 20
  sleep_color_temp: 1800 # Improved sleep hygiene
  sleep_transition: 60
  transition_until_sleep: true
  min_sunrise_time: "06:00:00" # Early for morning routines
  max_sunrise_time: "07:30:00"
  min_sunset_time: "18:00:00"
  max_sunset_time: "20:00:00"
  take_over_control: true
  detect_non_ha_changes: false
  autoreset_control_seconds: 7200
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 8  # Increased for mixed bulb types
  skip_redundant_commands: true
  intercept: true
  multi_light_intercept: true
  include_config_in_attributes: true
  brightness_mode: "tanh"

# =============================================================================
# TRANSITION AREAS - Motion-activated spaces with quick transitions
# =============================================================================

- name: "Flur"
  lights:
    - light.alle_flur_lichter
    - light.alle_flur_nachtlichter
  interval: 90
  transition: 15  # Reduced for IKEA compatibility
  initial_transition: 0
  min_brightness: 30
  max_brightness: 100
  min_color_temp: 2000 # Consistent warm minimum
  max_color_temp: 6000 # Bright white maximum
  prefer_rgb_color: false
  sleep_brightness: 8 # Very low for nighttime navigation
  sleep_color_temp: 1800 # Optimal circadian rhythm for nighttime navigation
  sleep_transition: 30 # Quick transition for transitional space
  transition_until_sleep: true
  min_sunrise_time: "05:00:00"
  max_sunrise_time: "07:00:00"
  min_sunset_time: "18:00:00"
  max_sunset_time: "20:00:00"
  take_over_control: true
  detect_non_ha_changes: false
  autoreset_control_seconds: 7200
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 12 # Higher delay for motion sensor areas in hallways
  skip_redundant_commands: true
  intercept: true
  multi_light_intercept: true
  include_config_in_attributes: true
  brightness_mode: "tanh"

# =============================================================================
# OUTDOOR AREAS - Extended evening hours with slower transitions
# =============================================================================

- name: "Balkon"
  lights:
    - light.alle_balkon_lichter
  interval: 120 # Slower updates for outdoor
  transition: 15 # Reduced for IKEA compatibility
  initial_transition: 0
  min_brightness: 20 # Lower minimum for outdoor ambiance
  max_brightness: 100
  min_color_temp: 2000 # Consistent warm minimum
  max_color_temp: 6000 # Bright white maximum
  prefer_rgb_color: false
  sleep_brightness: 10 # Minimal outdoor lighting
  sleep_color_temp: 1800 # Optimal circadian rhythm for outdoor evening
  sleep_transition: 30 # Reduced for IKEA compatibility
  transition_until_sleep: false # No sleep transition for outdoor
  min_sunrise_time: "05:30:00"
  max_sunrise_time: "07:30:00"
  min_sunset_time: "19:30:00" # Later for outdoor evening use
  max_sunset_time: "21:30:00" # Extended summer evenings
  take_over_control: true
  detect_non_ha_changes: false
  autoreset_control_seconds: 7200 # Longer reset for outdoor
  only_once: false
  adapt_only_on_bare_turn_on: false
  separate_turn_on_commands: true  # CRITICAL: Required for IKEA lights
  send_split_delay: 0.5  # Delay between commands for IKEA lights
  adapt_delay: 15 # Higher delay for outdoor sensors and mixed bulb types
  skip_redundant_commands: true
  intercept: true
  multi_light_intercept: true
  include_config_in_attributes: true
  brightness_mode: "tanh" # Smooth transitions for outdoor
